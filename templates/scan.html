{% extends "base.html" %}
{% block content %}

<div class="card">
  <div class="topline">
    <h2>Scan</h2>
    <div class="chips">
      <a class="chip" href="/">Home</a>
      <a class="chip" href="/protocolo">Protocolo</a>
    </div>
  </div>

  {% if convidado %}
    {% set total = 1 + (convidado[3] or 0) %}
    <div class="scanbox {% if convidado[4] == 'Sim' %}scan-no{% else %}scan-ok{% endif %}">
      <div class="scan-title">{{ convidado[1] }}</div>
      <div class="scan-sub">
        Mesa: <b>{{ convidado[2] }}</b> • Acompanhantes: <b>{{ convidado[3] }}</b> • Total pessoas: <b>{{ total }}</b>
      </div>

      {% if convidado[4] == "Sim" %}
        <div class="scan-status">❌ Já entrou</div>
        <a class="btn btn-ghost" href="/resetar/{{ convidado[0] }}">Resetar</a>
      {% else %}
        <div class="scan-status">✅ Válido</div>
        <a class="btn" href="/entrar/{{ convidado[0] }}">Marcar entrada</a>
      {% endif %}
    </div>
  {% else %}
    <p class="muted">Convidado não encontrado.</p>
  {% endif %}

</div>

{% endblock %}

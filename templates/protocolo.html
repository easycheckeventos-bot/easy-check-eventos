{% extends "base.html" %}
{% block title %}Protocolo{% endblock %}
{% block content %}

<div class="card section">
  <div class="section-title">
    <h2>Protocolo</h2>
    <p class="hint">Pesquisar por nome e marcar entrada</p>
  </div>

  <form class="form-row" method="GET">
    <input class="input" name="q" placeholder="Pesquisar convidado..." value="{{ request.args.get('q','') }}">
    <button class="btn" type="submit">Procurar</button>
    <a class="btn btn-ghost" href="/protocolo">Limpar</a>
  </form>

  <div class="table">
    <div class="row head">
      <div>ID</div><div>Nome</div><div>Mesa</div><div>Acomp.</div><div>Total</div><div>Status</div><div>Ação</div>
    </div>

    {% for c in convidados %}
    <div class="row">
      <div class="muted">#{{ c.id }}</div>
      <div><b>{{ c.nome }}</b></div>
      <div>{{ c.mesa }}</div>
      <div>{{ c.acompanhantes }}</div>
      <div>{{ 1 + c.acompanhantes }}</div>
      <div>
        {% if c.entrou == "Sim" %}
          <span class="badge badge-ok">Entrou</span>
        {% else %}
          <span class="badge badge-no">Não entrou</span>
        {% endif %}
      </div>
      <div>
        {% if c.entrou == "Sim" %}
          <a class="btn btn-ghost" href="/reset/{{ c.id }}">Resetar</a>
        {% else %}
          <a class="btn btn-success" href="/entrar/{{ c.id }}">Marcar entrada</a>
        {% endif %}
      </div>
    </div>
    {% endfor %}
  </div>
</div>

{% endblock %}